{# Cart Sidebar Organism - POS
   Complete cart sidebar with items, total, and checkout button

   Usage with Alpine.js:
   <div x-data="posApp()">
       {% include "components/organisms/cart-sidebar.html" %}
   </div>

   Expected Alpine.js data:
   - cart: Array of cart items
   - cartTotal: Computed total amount
   - clearCart(): Function to clear cart
   - processPayment(): Function to process payment
   - Methods from cart-item molecule (increaseQty, decreaseQty, removeFromCart)
#}
{% load static %}

<div class="card sticky-top" style="top: 20px;">
    <div class="card-header bg-primary text-white">
        <h5 class="mb-0">
            <i class="bi bi-cart3"></i> Current Order
        </h5>
    </div>
    <div class="card-body">
        <!-- Cart Items -->
        <div x-show="cart.length > 0">
            <div class="list-group mb-3" style="max-height: 400px; overflow-y: auto;">
                <template x-for="(item, index) in cart" :key="index">
                    {% include "components/molecules/cart-item.html" %}
                </template>
            </div>

            <!-- Total -->
            <div class="border-top pt-3 mb-3">
                <div class="d-flex justify-content-between align-items-center mb-2">
                    <h5 class="mb-0">Total:</h5>
                    <h4 class="mb-0 text-success fw-bold">
                        $<span x-text="cartTotal.toFixed(2)"></span>
                    </h4>
                </div>
                <small class="text-muted">
                    <span x-text="cart.length"></span> item(s)
                </small>
            </div>

            <!-- Actions -->
            <div class="d-grid gap-2">
                <button type="button"
                        class="btn btn-success btn-lg"
                        @click="processPayment()">
                    <i class="bi bi-credit-card"></i> Process Payment
                </button>
                <button type="button"
                        class="btn btn-outline-danger"
                        @click="clearCart()">
                    <i class="bi bi-trash"></i> Clear Cart
                </button>
            </div>
        </div>

        <!-- Empty State -->
        <div x-show="cart.length === 0" class="text-center py-5">
            <i class="bi bi-cart-x text-muted" style="font-size: 3rem;"></i>
            <p class="mt-3 text-muted">Cart is empty</p>
            <small class="text-muted">Add products to get started</small>
        </div>
    </div>
</div>
