{% extends "layouts/base.html" %}

{% block title %}Component Library{% endblock %}

{% block content %}
<div class="container-fluid py-4" x-data="componentPreview()">
    <div class="row mb-4">
        <div class="col">
            <h1><i class="bi bi-palette"></i> Component Library</h1>
            <p class="text-muted">Atomic Design Pattern Implementation - Phase 8</p>
        </div>
    </div>

    <!-- Navigation -->
    <ul class="nav nav-tabs mb-4" role="tablist">
        <li class="nav-item">
            <a class="nav-link" :class="{'active': tab === 'atoms'}" @click="tab = 'atoms'" href="#">Atoms</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" :class="{'active': tab === 'molecules'}" @click="tab = 'molecules'" href="#">Molecules</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" :class="{'active': tab === 'organisms'}" @click="{'active': tab === 'organisms'}" @click="tab = 'organisms'" href="#">Organisms</a>
        </li>
    </ul>

    <!-- Atoms Tab -->
    <div x-show="tab === 'atoms'">
        <h2 class="mb-4">‚öõÔ∏è Atoms - Basic Building Blocks</h2>

        <!-- Buttons -->
        <div class="card mb-4">
            <div class="card-header">
                <h5>Buttons</h5>
            </div>
            <div class="card-body">
                <div class="d-flex flex-wrap gap-2 mb-3">
                    {% include "components/atoms/button.html" with type="primary" text="Primary" %}
                    {% include "components/atoms/button.html" with type="secondary" text="Secondary" %}
                    {% include "components/atoms/button.html" with type="success" text="Success" %}
                    {% include "components/atoms/button.html" with type="danger" text="Danger" %}
                    {% include "components/atoms/button.html" with type="warning" text="Warning" %}
                    {% include "components/atoms/button.html" with type="info" text="Info" %}
                </div>
                <div class="d-flex flex-wrap gap-2 mb-3">
                    {% include "components/atoms/button.html" with type="outline-primary" text="Outline Primary" %}
                    {% include "components/atoms/button.html" with type="outline-secondary" text="Outline Secondary" %}
                    {% include "components/atoms/button.html" with type="outline-danger" text="Outline Danger" %}
                </div>
                <div class="d-flex flex-wrap gap-2 mb-3">
                    {% include "components/atoms/button.html" with type="primary" size="sm" text="Small" %}
                    {% include "components/atoms/button.html" with type="primary" size="md" text="Medium" %}
                    {% include "components/atoms/button.html" with type="primary" size="lg" text="Large" %}
                </div>
                <div class="d-flex flex-wrap gap-2">
                    {% include "components/atoms/button.html" with type="primary" text="With Icon" icon="bi-check-circle" %}
                    {% include "components/atoms/button.html" with type="success" text="Save" icon="bi-save" %}
                    {% include "components/atoms/button.html" with type="danger" text="Delete" icon="bi-trash" disabled=True %}
                </div>
            </div>
        </div>

        <!-- Badges -->
        <div class="card mb-4">
            <div class="card-header">
                <h5>Badges</h5>
            </div>
            <div class="card-body">
                <div class="d-flex flex-wrap gap-2">
                    {% include "components/atoms/badge.html" with type="primary" text="Primary" %}
                    {% include "components/atoms/badge.html" with type="secondary" text="Secondary" %}
                    {% include "components/atoms/badge.html" with type="success" text="Success" icon="bi-check-circle" %}
                    {% include "components/atoms/badge.html" with type="danger" text="Danger" icon="bi-x-circle" %}
                    {% include "components/atoms/badge.html" with type="warning" text="Warning" icon="bi-exclamation-triangle" %}
                    {% include "components/atoms/badge.html" with type="info" text="Info" icon="bi-info-circle" %}
                </div>
            </div>
        </div>

        <!-- Icons -->
        <div class="card mb-4">
            <div class="card-header">
                <h5>Icons</h5>
            </div>
            <div class="card-body">
                <div class="d-flex flex-wrap gap-3 align-items-center">
                    {% include "components/atoms/icon.html" with name="bi-house" %}
                    {% include "components/atoms/icon.html" with name="bi-cart3" color="primary" %}
                    {% include "components/atoms/icon.html" with name="bi-check-circle" color="success" size="lg" %}
                    {% include "components/atoms/icon.html" with name="bi-x-circle" color="danger" size="lg" %}
                    {% include "components/atoms/icon.html" with name="bi-exclamation-triangle" color="warning" size="xl" %}
                </div>
            </div>
        </div>

        <!-- Spinners -->
        <div class="card mb-4">
            <div class="card-header">
                <h5>Spinners</h5>
            </div>
            <div class="card-body">
                <div class="d-flex flex-wrap gap-3 align-items-center">
                    {% include "components/atoms/spinner.html" with type="border" color="primary" %}
                    {% include "components/atoms/spinner.html" with type="border" color="success" %}
                    {% include "components/atoms/spinner.html" with type="grow" color="danger" %}
                    {% include "components/atoms/spinner.html" with type="border" color="primary" size="sm" %}
                </div>
            </div>
        </div>

        <!-- Alerts -->
        <div class="card mb-4">
            <div class="card-header">
                <h5>Alerts</h5>
            </div>
            <div class="card-body">
                {% include "components/atoms/alert.html" with type="primary" text="This is a primary alert" icon="bi-info-circle" %}
                {% include "components/atoms/alert.html" with type="success" text="Operation completed successfully!" icon="bi-check-circle" %}
                {% include "components/atoms/alert.html" with type="warning" text="Warning: Low stock detected" icon="bi-exclamation-triangle" %}
                {% include "components/atoms/alert.html" with type="danger" text="Error: Payment failed" icon="bi-x-circle" dismissible=True %}
            </div>
        </div>

        <!-- Inputs -->
        <div class="card mb-4">
            <div class="card-header">
                <h5>Form Inputs</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        {% include "components/atoms/input.html" with type="text" name="username" label="Username" placeholder="Enter username" required=True %}
                    </div>
                    <div class="col-md-6">
                        {% include "components/atoms/input.html" with type="email" name="email" label="Email" placeholder="user@example.com" %}
                    </div>
                    <div class="col-md-6">
                        {% include "components/atoms/input.html" with type="password" name="password" label="Password" %}
                    </div>
                    <div class="col-md-6">
                        {% include "components/atoms/input.html" with type="number" name="quantity" label="Quantity" value="1" size="lg" %}
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Molecules Tab -->
    <div x-show="tab === 'molecules'">
        <h2 class="mb-4">üß¨ Molecules - Functional Components</h2>

        <!-- Stat Cards -->
        <div class="card mb-4">
            <div class="card-header">
                <h5>Stat Cards</h5>
            </div>
            <div class="card-body">
                <div class="row g-3">
                    <div class="col-md-3">
                        {% include "components/molecules/stat-card.html" with title="Total Sales" value="$12,345.67" icon="bi-currency-dollar" color="success" trend="+12.5%" %}
                    </div>
                    <div class="col-md-3">
                        {% include "components/molecules/stat-card.html" with title="Total Orders" value="156" icon="bi-receipt" color="primary" trend="+8%" %}
                    </div>
                    <div class="col-md-3">
                        {% include "components/molecules/stat-card.html" with title="Low Stock" value="5" icon="bi-exclamation-triangle" color="warning" %}
                    </div>
                    <div class="col-md-3">
                        {% include "components/molecules/stat-card.html" with title="Active Products" value="42" icon="bi-box-seam" color="info" %}
                    </div>
                </div>
            </div>
        </div>

        <!-- Product Cards -->
        <div class="card mb-4">
            <div class="card-header">
                <h5>Product Cards</h5>
            </div>
            <div class="card-body">
                <h6 class="text-muted mb-3">Kiosk Version</h6>
                <div class="row g-3 mb-4" x-data="{
                    products: [
                        {id: 1, name: 'Pepperoni Pizza', price: 12.99, is_low_stock: false, is_out_of_stock: false},
                        {id: 2, name: 'Margherita Pizza', price: 10.99, is_low_stock: true, is_out_of_stock: false},
                        {id: 3, name: 'Hawaiian Pizza', price: 13.99, is_low_stock: false, is_out_of_stock: true}
                    ],
                    addToCart: function(p) { alert('Added ' + p.name + ' to cart') }
                }">
                    <template x-for="product in products" :key="product.id">
                        <div class="col-md-4">
                            {% include "components/molecules/product-card-kiosk.html" %}
                        </div>
                    </template>
                </div>

                <h6 class="text-muted mb-3">POS Version</h6>
                <div class="row g-3" x-data="{
                    filteredProducts: [
                        {id: 1, name: 'Pepperoni Pizza', price: 12.99, stock: 15, is_low_stock: false, is_out_of_stock: false},
                        {id: 2, name: 'Margherita Pizza', price: 10.99, stock: 3, is_low_stock: true, is_out_of_stock: false}
                    ],
                    addToCart: function(p) { alert('Added ' + p.name + ' to cart') }
                }">
                    <template x-for="product in filteredProducts" :key="product.id">
                        <div class="col-md-4">
                            {% include "components/molecules/product-card-pos.html" %}
                        </div>
                    </template>
                </div>
            </div>
        </div>

        <!-- Cart Items -->
        <div class="card mb-4">
            <div class="card-header">
                <h5>Cart Items</h5>
            </div>
            <div class="card-body">
                <div class="list-group" x-data="{
                    cart: [
                        {name: 'Pepperoni Pizza', price: 12.99, qty: 2},
                        {name: 'Coca Cola', price: 2.50, qty: 1}
                    ],
                    increaseQty: function(i) { this.cart[i].qty++ },
                    decreaseQty: function(i) { if(this.cart[i].qty > 1) this.cart[i].qty-- },
                    removeFromCart: function(i) { this.cart.splice(i, 1) }
                }">
                    <template x-for="(item, index) in cart" :key="index">
                        {% include "components/molecules/cart-item.html" %}
                    </template>
                </div>
            </div>
        </div>
    </div>

    <!-- Organisms Tab -->
    <div x-show="tab === 'organisms'">
        <h2 class="mb-4">üß© Organisms - Complex Components</h2>

        <!-- Dashboard Stats -->
        <div class="card mb-4">
            <div class="card-header">
                <h5>Dashboard Stats Grid</h5>
            </div>
            <div class="card-body">
                <div x-data="{
                    stats: {
                        total_sales: 12345.67,
                        total_orders: 156,
                        low_stock_count: 5,
                        active_products: 42
                    }
                }">
                    {% include "components/organisms/dashboard-stats.html" %}
                </div>
            </div>
        </div>

        <!-- Product Grid Demo -->
        <div class="card mb-4">
            <div class="card-header">
                <h5>Product Grid (POS)</h5>
            </div>
            <div class="card-body">
                <div x-data="{
                    filteredProducts: [
                        {id: 1, name: 'Pepperoni Pizza', price: 12.99, stock: 15, is_low_stock: false, is_out_of_stock: false},
                        {id: 2, name: 'Margherita Pizza', price: 10.99, stock: 3, is_low_stock: true, is_out_of_stock: false},
                        {id: 3, name: 'Hawaiian Pizza', price: 13.99, stock: 8, is_low_stock: false, is_out_of_stock: false}
                    ],
                    loading: false,
                    search: '',
                    searchProducts: function() {},
                    addToCart: function(p) { alert('Added ' + p.name) }
                }">
                    {% include "components/organisms/product-grid-pos.html" %}
                </div>
            </div>
        </div>

        <!-- Cart Sidebar Demo -->
        <div class="card mb-4">
            <div class="card-header">
                <h5>Cart Sidebar</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-4">
                        <div x-data="{
                            cart: [
                                {name: 'Pepperoni Pizza', price: 12.99, qty: 2},
                                {name: 'Coca Cola', price: 2.50, qty: 3}
                            ],
                            get cartTotal() {
                                return this.cart.reduce((sum, item) => sum + (item.price * item.qty), 0);
                            },
                            increaseQty: function(i) { this.cart[i].qty++ },
                            decreaseQty: function(i) { if(this.cart[i].qty > 1) this.cart[i].qty-- },
                            removeFromCart: function(i) { this.cart.splice(i, 1) },
                            clearCart: function() { if(confirm('Clear cart?')) this.cart = [] },
                            processPayment: function() { alert('Processing payment of $' + this.cartTotal.toFixed(2)) }
                        }">
                            {% include "components/organisms/cart-sidebar.html" %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
function componentPreview() {
    return {
        tab: 'atoms'
    }
}
</script>
{% endblock %}
